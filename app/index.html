<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>MacSyView</title>
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css({.tmp,app}) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
</head>

<body>

    <div class="container">
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <a class="navbar-brand" href="#">MacSyView</a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="#" id="homeLink">Open Results file</a>
                    </li>
                    <li>
                        <a href="#" id="systemMatchesLinkList">System Matches List<span id="runName"></span></a>
                    </li>
                </ul>
            </div>
            <!-- /.container-fluid -->
        </nav>
        <div id="mainView">
        </div>
    </div>


    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/mustache/mustache.js"></script>
    <script src="bower_components/raphael/raphael.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js({.tmp,app}) scripts/scripts.js -->
    <script src="scripts/macsyview.js"></script>
    <!-- endbuild -->

    <script id="systemMatchesList" type="text/mustache-tmpl">
        <table class="table table-hover tab-striped">
            <tr>
                <th>Replicon Name</th>
                <th>System Name</th>
                <th>Occurence No.</th>
            </tr>
            {{#files}}
            <tr class="txsview-systemmatchtablerow" data-systemmatchid="{{id}}">
                <td>{{replicon_name}}</td>
                <td>{{system_name}}</td>
                <td>{{occurence_number}}</td>
            </tr>
            {{/files}}
        </table>
    </script>

    <script id="runSelectForm" type="text/mustache-tmpl">
        <div class="jumbotron">
            <h1>MacSyView</h1>
            <p>Select the folder containing the TXSScan results</p>
            <p class="btn btn-primary btn-file btn-block">
                Browse
                <input type="file" id="directory" title="select the directory containing the results to analyze" webkitdirectory>
            </p>
        </div>
    </script>

    <script id="systemMatchDetail" type="text/template">    
        <h2>Components for system {{name}}</h2>
        {{#replicon}}
            <h4>Replicon {{name}} (length: {{length}}, topology: {{topology}})</h4>
        {{/replicon}}
        <table class="table table-hover tab-striped">
        <thead>
            <tr>
				<th>Sequence Id</th>
                <th>Position</th>
                <th>Match</th>
                <th>Gene status</th>
				<th>System</th>
                <th>Sequence length</th>
                <th>Score</th>
                <th>i-evalue</th>
				<th>Profile coverage</th>                
                <th>Sequence coverage</th>
                <th>Begin match</th>
                <th>End match</th>
            </tr>
        </thead>
        <tbody>
            {{#matchedGenes}}
            <tr>
				<td>{{id}}</td>
				<td>{{position}}</td>
                <td>{{match}}</td>
                <td>{{gene_status}}</td>
				<td>{{system}}</td>
				<td>{{sequence_length}}</td>
                <!-- <td>{{strand}}</td> comment sait on sur quel brin est le gene?  beg et end?-->
                <td>{{score}}</td>
				<td>{{i_eval}}</td>
				<td>{{profile_coverage}}</td>
				<td>{{sequence_coverage}}</td>
				<td>{{begin_match}}</td>
				<td>{{end_match}}</td>
            </tr>
            {{/matchedGenes}}
        </tbody>
    </table>
    </script>

    <script>
        var macsyview = macsyview;
        $(document).ready(macsyview.init());
    </script>

</body>

</html>
