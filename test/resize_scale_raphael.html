<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf8" />
		<title>resize+plugin</title>
		<script src="lib/jquery-1.10.2.js" type="text/javascript"></script>
		<!--<script src="lib/raphael-min.js"></script>-->
		<script src="lib/raphael.js"></script>
		<script src="lib/scale.raphael.js"></script>
		<style>
		#canvas {
			//position: relative;
			border: 1px solid;
			margin-right:40px;
    		margin-left:40px;
			}
		#output {
		    //position: relative;
			border: 1px solid #000;
			background: #ddd;
			margin-right:40px;
   			margin-left:40px;
		</style>
		
    </head>
    <body>
    <div id="canvas">
    </div>
    <div id="output">
    </div>
    </body>
    <script type="text/javascript">
    var paper = ScaleRaphael("canvas", $("#canvas").width(), 200);
    paper.canvas.style.backgroundColor = '#Fdd';
    for (var c= 0; c < 60; c++){
    	paper.rect(c * 20, c * 10, 10, 10).attr("fill", "hsl("+Math.random()+",0.5,0.5)");
    }
    
    var w = document.getElementById("canvas").offsetWidth;
    document.getElementById("output").innerHTML = w;
    
    //paper.setViewBox(0,0,200,200);
    
    var resizePaper = function resizePaper(evt){
    	console.log("resizePaper");
    	var w = document.getElementById("canvas").offsetWidth;
        var w2 = $(this).width();
    	var win = $("#canvas");
    	document.getElementById("output").innerHTML = w + "  " + w2 + "<br />" + 
        document.getElementById("output").innerHTML;
    	paper.changeSize(win.width(), win.height(), false, true);
    	}
    resizePaper();
    $(window).resize(resizePaper);
    
    </script>
</html>
    