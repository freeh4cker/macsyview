<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf8" />
		<title>test resize</title>
		<script src="lib/jquery-1.10.2.js" type="text/javascript"></script>
		<script src="lib/raphael-min.js"></script>
		<!--<script src="lib/raphael.js"></script>-->
		<style>
		#canvas {
			height: 200px;
			border: 1px solid #ccc;
			margin-right:40px;
    		margin-left:40px;
			}
		#output {
			border: 1px solid #000;
			background: #ddd;
			margin-right:40px;
   			margin-left:40px;
		</style>
		
    </head>
    <body>
    <div id="canvas">
    </div>
    <div id="output">
    </div>
    </body>
    <script type="text/javascript">
    var w = document.getElementById("canvas").offsetWidth;
    document.getElementById("output").innerHTML = w;
    
    
    var paper = Raphael("canvas", 200, 200);
    paper.canvas.style.backgroundColor = '#Fdd';
    for (var c= 0; c < 60; c++){
    	paper.rect(c * 20, c * 10, 10, 10).attr("fill", "hsl("+Math.random()+",0.5,0.5)");
    }
    
    //paper.setViewBox(0,0,200,200);
    
    function resizePaper(){
    	var w = document.getElementById("canvas").offsetWidth;
        var w2 = $("#canvas").width();
    	document.getElementById("output").innerHTML = w + "  " + w2 + "<br />" + 
        document.getElementById("output").innerHTML;
        paper.setSize(w, document.getElementById("canvas").offsetHeight);
    }
    resizePaper();
    $("#canvas").resize(resizePaper);
    
    </script>
</html>
    